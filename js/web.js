!function(e){function t(t){for(var r,c,i=t[0],l=t[1],u=t[2],f=0,m=[];f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(t);m.length;)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={1:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;o.push([761,0]),n()}({582:function(e,t,n){},584:function(e,t,n){},585:function(e,t,n){},586:function(e,t,n){},587:function(e,t,n){},588:function(e,t,n){},589:function(e,t,n){},591:function(e,t,n){},592:function(e,t,n){},756:function(e,t,n){},757:function(e,t,n){},758:function(e,t,n){},759:function(e,t,n){},761:function(e,t,n){"use strict";n.r(t);n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(143),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(401),n(402),n(403),n(404),n(405),n(407),n(408),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(473),n(474),n(475),n(476),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(279),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(280),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(571),n(287);var r=n(0),a=n.n(r),o=n(19),c=n.n(o),i=n(812),l=n(813),u=n(341),s=n(342),f=(n(581),n(582),n(78),n(6),n(34)),m=n.n(f),d=n(797),p=n(814),b=n(819),h=n(808),y=n(337),v=n.n(y),g=n(338),w=n.n(g),E=n(336),x=n.n(E),S=n(815),k=(n(584),n(343));n(585);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.selectedLabel,n=e.itemRender,o=e.options,c=e.onChange,i=e.className,l=e.classes,u=void 0===l?{}:l,s=j(Object(r.useState)(null),2),f=s[0],p=s[1],h=function(){p(null)};return a.a.createElement("div",{className:m()("selector",i)},a.a.createElement(d.a,{onClick:function(e){p(e.currentTarget)},classes:{root:u.btn}},t),a.a.createElement(k.a,{anchorEl:f,open:Boolean(f),onClose:h},o.map((function(e){return a.a.createElement(b.a,{key:e.key,onClick:function(){return function(e){c(e),h()}(e)}},n(e))}))))};_.propTypes={};var C=_,A=(n(586),n(587),{crop:"icon-crop",qrcode:"icon-qrcode",pen:"icon-pen",folder:"icon-folder",picture:"icon-picture",palette:"icon-palette",pigment:"icon-pigment",bucket:"icon-bucket",move:"icon-move","bucket-all":"icon-bucket-all","mirror-no":"icon-mirror-no","mirror-horizontal":"icon-mirror-horizontal","mirror-vertical":"icon-mirror-vertical","mirror-corner":"icon-mirror-corner",rect:"icon-rect",ellipse:"icon-ellipse",line:"icon-line",stamp:"icon-stamp","heart-l":"icon-heart-l","heart-m":"icon-heart-m","heart-s":"icon-heart-s","star-l":"icon-star-l","star-m":"icon-star-m","star-s":"icon-star-s",github:"icon-github",libary:"icon-archive","step-back":"icon-previous","text-tool":"icon-text-tool","text-edit":"icon-edit-text","convert-img":"icon-convert-img","layout-1":"icon-layout-1","layout-2":"icon-layout-2","layout-3":"icon-layout-3","layout-4":"icon-layout-4"}),N={s:"16px",m:"24px",l:"32px"},T=function(e){var t=e.size,n=void 0===t?"m":t,r=e.style,o=void 0===r?"github":r;return a.a.createElement("div",{className:m()(A[o]),style:{fontSize:N[n],lineHeight:1}})};T.propTypes={};var B=T,P=(n(588),function(e){var t=e.label,n=e.icon;return a.a.createElement("div",{className:"icon-label"},a.a.createElement(B,{style:n}),a.a.createElement("div",{className:"icon-label__label"},t))});P.propTypes={};var I=P,R=n(816),z=n(817),M=n(109),H=n.n(M),U=n(331),L=n.n(U),F=n(330),D=n.n(F),W=n(328),$=n.n(W),Y=n(806),X=n(329),q=n.n(X);function J(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){J(o,r,a,c,i,"next",e)}function i(e){J(o,r,a,c,i,"throw",e)}c(void 0)}))}}var G=function(e){var t=function(e){var t="";new XMLSerializer;return e.setAttribute("xlink","http://www.w3.org/1999/xlink"),t=(t=(t=(new XMLSerializer).serializeToString(e)).replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href"),new Blob([t],{type:"image/svg+xml"})}(e);return URL.createObjectURL(t)},K=function(e){return new Promise(function(){var t=V(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FileReader).readAsDataURL(e),a.onloadend=function(){n(a.result)};case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},Q=function(e,t){return new Promise(function(){var n=V(regeneratorRuntime.mark((function n(r,a){var o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(t).then((function(e){return e.blob()}));case 2:return o=n.sent,n.next=5,K(o);case 5:c=n.sent,r({base64:c,font:e});case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(function(){var t=V(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.next=3,Promise.all(e.map((function(e){return Q(e,e.url)})));case 3:t.sent.forEach((function(e){var t="".concat(e.base64),n="\n        @font-face {\n          font-family: ".concat(e.font.name,";\n          font-style: normal;\n          font-weight: 400;\n          src: url(").concat(t,");\n          unicode-range: ").concat(e.font.unicodeRange,";\n        }\n      ");a.push({name:e.font.name,fontStyle:n})})),n(a);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};var ee=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsDataURL(e)}))};n(589);function te(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){te(o,r,a,c,i,"next",e)}function i(e){te(o,r,a,c,i,"throw",e)}c(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oe={"font-jf-openhuninn":{name:"font-jf-openhuninn",url:"font/jf-openhuninn-11.woff"},"font-soukou-mincho":{name:"font-soukou-mincho",url:"font/soukouMincho.woff"},"notoSansTC-medium":{name:"notoSansTC-black",url:"font/notoSansTC-medium.woff"},"notoSansTC-bold":{name:"notoSansTC-black",url:"font/notoSansTC-bold.woff"},"notoSansTC-black":{name:"notoSansTC-black",url:"font/notoSansTC-black.woff"}},ce=function(e){var t=e.svgNode,n=e.imgUrl,o=e.svgProps,c=e.onClose,i=e.imgWidth,l=e.imgHeight,u=e.bannerHeight,s=e.scale,f=e.fontFamily,p=Object(r.useRef)(null),b=re(Object(r.useState)(!1),2),h=b[0],y=b[1],v=re(Object(r.useState)(!1),2),g=v[0],w=v[1],E=re(Object(r.useState)(""),2),x=E[0],S=E[1],k=function(){var e=ne(regeneratorRuntime.mark((function e(){var r,a,c,s,m,d,b,h,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),r="./gallery/".concat(n),e.next=4,fetch(r).then((function(e){return e.blob()}));case 4:return a=e.sent,e.next=7,ee(a);case 7:if(c=e.sent,!f.file){e.next=14;break}return e.next=11,Z([oe[f.file]]);case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0=[];case 15:s=e.t0,m=t.cloneNode(!0),m.getElementById("svg-def"),d="http://www.w3.org/2000/svg",s.length>0&&s.forEach((function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e.fontStyle,m.getElementsByTagNameNS(d,"defs")[0].appendChild(t)})),b=o.bottomBannerShow&&o.topBannerShow?l+2*u:o.bottomBannerShow||o.topBannerShow?l+u:l,m.getElementsByTagNameNS(d,"image")[0].setAttribute("xlink:href",c),m.getElementsByTagNameNS(d,"image")[0].setAttribute("href",c),h=G(m),v=p.current.getContext("2d"),(g=new Image).onload=function(){v.canvas.width=i,v.canvas.height=b,v.drawImage(g,0,0,i,b),y(!1)},g.src=h;case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=ne(regeneratorRuntime.mark((function e(t,n,r){var a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),o=new Date,(c=document.createElement("a")).setAttribute("download","".concat(n,"-").concat(o.getTime(),".").concat(r)),c.setAttribute("href",t),c.setAttribute("target","_self"),c.dispatchEvent(a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var e=ne(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,ee(t);case 3:return n=e.sent,"https://api.imgur.com/3/image",r=new Headers({Authorization:"Client-ID 41e9570f0218f10"}),(a=new FormData).append("image",n.replace("data:image/png;base64,","")),a.append("title","ghibli-oogiri-".concat((new Date).getTime())),o={headers:r,body:a,method:"POST",mode:"cors"},e.prev=10,e.next=13,fetch("https://api.imgur.com/3/image",o).then((function(e){return e.json()}));case 13:c=e.sent,i=c.data,l=c.status,c.success?S(i.link):console.log(l),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0);case 23:y(!1);case 24:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){w(!1)};return Object(r.useEffect)((function(){k()}),[]),a.a.createElement("div",{className:m()("previewer",{"previewer--converting":h,"previewer--has-imgur-link":x})},a.a.createElement("div",{className:"previewer__wrap"},a.a.createElement("div",{style:{transform:"scale(".concat(s,", ").concat(s,")")}},a.a.createElement("canvas",{ref:p,width:i,height:o.bottomBannerShow&&o.topBannerShow?l+2*u:o.bottomBannerShow||o.topBannerShow?l+u:l}))),a.a.createElement("div",{className:"previewer__actions"},a.a.createElement("div",{className:"previewer__actions-wrap"},x&&a.a.createElement("div",{className:"previewer__actions-row"},a.a.createElement(R.a,{className:"previewer__actions-text-field",value:x,InputProps:{readOnly:!0},variant:"outlined"}),a.a.createElement(z.a,{PopperProps:{disablePortal:!0},onClose:_,open:g,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,title:"已複製！",placement:"top"},a.a.createElement(d.a,{onClick:function(){w(!0);var e=document.createElement("textarea");e.value=x,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),setTimeout(_,500)}},a.a.createElement($.a,null)))),a.a.createElement("div",{className:"previewer__actions-row"},a.a.createElement(d.a,{className:"previewer__btn",onClick:k},a.a.createElement("div",{className:"previewer__btn-wrap"},a.a.createElement(q.a,null),"重新轉換")),a.a.createElement(d.a,{className:"previewer__btn",onClick:c},a.a.createElement("div",{className:"previewer__btn-wrap"},a.a.createElement(H.a,null),"編輯")),a.a.createElement(d.a,{className:"previewer__btn",onClick:function(){p.current.toBlob((function(e){var t=URL.createObjectURL(e);j(t,"image","jpg")}),"image/jpg",1)}},a.a.createElement("div",{className:"previewer__btn-wrap"},a.a.createElement(D.a,null),"下載")),a.a.createElement(d.a,{className:"previewer__btn",onClick:function(){p.current.toBlob((function(e){O(e)}),"image/jpg",1)}},a.a.createElement("div",{className:"previewer__btn-wrap"},a.a.createElement(L.a,null),"上傳imgur"))))),h&&a.a.createElement(Y.a,{className:"previewer__loader"}))};ce.propTypes={};var ie=ce,le=n(7),ue=n(818),se=n(820),fe=n(807),me=n(333),de=n.n(me),pe=n(332),be=n.n(pe),he=n(80),ye=n.n(he);n(591);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ee=["marnie","kaguyahime","kazetachinu","kokurikozaka","karigurashi","ponyo","ged","chihiro"],xe={marnie:"回憶中的瑪妮",kaguyahime:"輝耀姬物語",kazetachinu:"風起",kokurikozaka:"來自紅花坂",karigurashi:"借物少女艾莉緹",ponyo:"崖上的波妞",ged:"地海戰記",chihiro:"神隱少女"},Se=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=[],r=0;r<e;r+=1)n.push(t);return n}(50),ke=Object(le.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",width:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(ue.a),je=Object(le.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(se.a),Oe=Object(le.a)((function(e){return{root:{padding:e.spacing(2)}}}))(fe.a),_e=function(e){var t=e.selectImage,n=ge(Object(r.useState)(Ee[0]),2),o=n[0],c=n[1],i=ge(Object(r.useState)(""),2),l=i[0],u=i[1],s=ge(Object(r.useState)("grid"),2),f=s[0],p=s[1];return Object(r.useEffect)((function(){}),[]),a.a.createElement("div",{className:"gallery"},a.a.createElement("div",{className:"gallery__header"},a.a.createElement("h2",{className:"gallery__title"},"選擇一張圖片進行創作"),a.a.createElement(d.a,{onClick:function(){p("grid"===f?"list":"grid")}},"list"===f?a.a.createElement(be.a,null):a.a.createElement(de.a,null))),a.a.createElement("div",{className:"gallery__wrap"},Ee.map((function(e){return a.a.createElement(ke,{square:!0,expanded:o===e,o:!0,onChange:(t=e,function(e,n){c(!!n&&t)}),key:e},a.a.createElement(je,{"aria-controls":"panel1d-content",id:"panel1d-header"},xe[e]),a.a.createElement(Oe,null,a.a.createElement("div",{className:"gallery__detail-wrap"},a.a.createElement("div",{className:"gallery__thumb"},Se.map((function(t,n){var r,o;return a.a.createElement("div",(ve(o={className:"gallery__thumb-wrap"},"className",m()("gallery__thumb-wrap",{"gallery__thumb-wrap--list":"list"===f})),ve(o,"key","".concat(e).concat(("00"+(n+1)).slice(-3))),ve(o,"onClick",(function(){return u("".concat(e).concat(("00"+(n+1)).slice(-3)))})),o),a.a.createElement("img",(ve(r={className:"gallery__thumb-img"},"className",m()("gallery__thumb-img",{"gallery__thumb-img--active":l==="".concat(e).concat(("00"+(n+1)).slice(-3))})),ve(r,"src","".concat("http://www.ghibli.jp/gallery/","thumb-").concat(e).concat(("00"+(n+1)).slice(-3),".png")),r)))}))))));var t}))),a.a.createElement("div",{className:"gallery__actions"},a.a.createElement(d.a,{onClick:function(){t(l)},disabled:!l},a.a.createElement(ye.a,null),"我選好了！")))};_e.propTypes={};var Ce=_e;n(592);function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Te=function(e){var t=e.x,n=e.y,o=e.color,c=e.background,i=e.rotate,l=e.text,u=e.size,s=e.fontFamily,f=e.strokeWidth,m=e.stroke,d=e.textAnchor,p=e.selectHandler,b=e.handleBBoxChange,h=e.isSelected,y=e.index,v=e.scale,g=Object(r.useRef)(null),w=Ae(Object(r.useState)({x:0,y:0,width:0,height:0}),2),E=w[0],x=w[1];return Object(r.useEffect)((function(){g.current&&(x(g.current.getBBox()),b(g.current.getBBox()))}),[l,u,d,v]),a.a.createElement("g",{transform:"translate(".concat(t," ").concat(n,") rotate(").concat(i,")"),onClick:function(e){e.stopPropagation(),p(y)}},a.a.createElement("g",{transform:"translate(".concat(-E.width/2-E.x," ").concat(-E.height/2,")")},a.a.createElement("rect",{width:E.width,height:E.height,fill:c,x:E.x}),a.a.createElement("g",{ref:g,fontSize:"".concat(u*v,"px"),fontFamily:s},l.split(/[\n\r|\n|\r\n]/).map((function(e,t){return a.a.createElement("text",{dominantBaseline:"text-before-edge",textAnchor:d,strokeWidth:f,stroke:m,fill:o,key:t,x:0,y:t*u*v},e)}))),a.a.createElement("rect",{width:E.width,height:E.height,fill:"transparent",stroke:h?"white":"transparent",x:E.x})))};Te.propTypes={};var Be=Te,Pe=n(115),Ie=n(821),Re=n(177),ze=n.n(Re),Me=n(178),He=n.n(Me),Ue=n(179),Le=n.n(Ue),Fe=n(180),De=n.n(Fe),We=n(181),$e=n.n(We),Ye=n(335),Xe=n.n(Ye),qe=n(234),Je=n.n(qe),Ve=(n(756),n(334)),Ge=n.n(Ve);n(757);function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ze=function(e){var t=e.text,n=e.onClose,o=e.textUpdate,c=e.deleteText,i=Ke(Object(r.useState)(""),2),l=i[0],u=i[1];return Object(r.useEffect)((function(){u(t)}),[]),a.a.createElement("div",{className:"text-input"},a.a.createElement("div",{className:"text-input__content"},a.a.createElement("h5",{className:"text-input__title"},"輸入文字"),a.a.createElement(R.a,{multiline:!0,rows:4,variant:"outlined",value:l,onChange:function(e){return u(e.target.value)}}),c&&a.a.createElement("div",{className:"text-input__warning"},"＊如果沒有輸入文字，會自動刪除此文字塊"),a.a.createElement("div",{className:"text-input__actions"},a.a.createElement(d.a,{onClick:function(){!l&&c?c():(o(l),n())},className:"text-input__action-btn"},a.a.createElement(ye.a,null)," 確定"),a.a.createElement(d.a,{onClick:function(){!t&&c?c():n()},className:"text-input__action-btn"},a.a.createElement(Ge.a,null)," 取消"))))};Ze.propTypes={};var et=Ze;function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rt=[18,20,22,24,26,28,32,36,40,44,48,56,64,72,80,88,96],at=function(e){var t=e.textProps,n=e.textPropsChange,o=e.unselectText,c=e.deleteText,i=tt(Object(r.useState)(!1),2),l=i[0],u=i[1],s=tt(Object(r.useState)(null),2),f=s[0],m=s[1],h=tt(Object(r.useState)(null),2),y=(h[0],h[1],tt(Object(r.useState)(null),2)),v=y[0],g=y[1],w=function(e,t){n(e,t)},E=function(e){return function(t){var n=t.rgb,r=n.r,a=n.g,o=n.b,c=n.a;w(e,"rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(c,")"))}};return Object(r.useEffect)((function(){t.text||u(!0)}),[t]),a.a.createElement("div",{className:"text-editor",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"text-editor__wrap"},a.a.createElement("div",{className:"text-editor__row"},a.a.createElement(d.a,{onClick:function(e){return m(e.currentTarget)}},a.a.createElement(ze.a,{htmlColor:t.color})),a.a.createElement(k.a,{id:"font-color-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:function(){return m(null)}},a.a.createElement(Pe.SketchPicker,{color:t.color,onChangeComplete:E("color")})),a.a.createElement(d.a,{onClick:function(e){return g(e.currentTarget)}},a.a.createElement(He.a,{htmlColor:"transparent"!==t.background?t.background:"#000"})),a.a.createElement(k.a,{id:"stroke-color-menu",anchorEl:v,keepMounted:!0,open:Boolean(v),onClose:function(){return g(null)}},a.a.createElement(Pe.SketchPicker,{color:"transparent"!==t.background?t.background:"#000",onChangeComplete:E("background")})),a.a.createElement("div",{className:"text-editor__selector-btn"},"Size:",a.a.createElement(p.a,{labelId:"size-select",value:t.size,onChange:function(e){return w("size",e.target.value)},variant:"filled"},rt.map((function(e){return a.a.createElement(b.a,{key:e,value:e},e)})))),a.a.createElement(d.a,{onClick:function(){return u(!0)},variant:"outlined",className:"text-editor__flex-btn"},a.a.createElement(H.a,null),"Edit Text"),a.a.createElement(S.a,{open:l,onClose:function(){return u(!1)}},a.a.createElement(et,{text:t.text,textUpdate:function(e){return w("text",e)},onClose:function(){return u(!1)},deleteText:c}))),a.a.createElement("div",{className:"text-editor__row"},a.a.createElement(d.a,{variant:"start"===t.textAnchor?"contained":"text",onClick:function(){return w("textAnchor","start")}},a.a.createElement(Le.a,null)),a.a.createElement(d.a,{variant:"middle"===t.textAnchor?"contained":"text",onClick:function(){return w("textAnchor","middle")}},a.a.createElement(De.a,null)),a.a.createElement(d.a,{variant:"end"===t.textAnchor?"contained":"text",onClick:function(){return w("textAnchor","end")}},a.a.createElement($e.a,null)),a.a.createElement("div",{className:"text-editor__rotate-slider"},a.a.createElement("div",{className:"text-editor__rotate-slider-wrap"},a.a.createElement(Ie.a,{value:t.rotate,onChange:function(e,t){return w("rotate",t)},min:0,max:360,"aria-labelledby":"continuous-slider"})),a.a.createElement(Xe.a,null))),a.a.createElement("div",{className:"text-editor__row"},a.a.createElement(d.a,{onClick:o,className:"text-editor__flex-btn",variant:"contained"},a.a.createElement(ye.a,null),"完成"),a.a.createElement(d.a,{onClick:c,className:"text-editor__flex-btn"},a.a.createElement(Je.a,null),"刪除"))))};at.propTypes={};var ot=at;n(758);function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.x,n=e.y,o=e.color,c=e.text,i=e.textAnchor,l=e.size,u=e.fontFamily,s=e.background,f=e.scale,m=e.imgWidth,d=e.bannerHeight,p=e.pos,b=e.selectHandler,h=e.handleBBoxChange,y=e.isSelected,v=Object(r.useRef)(null),g=ct(Object(r.useState)({x:0,y:0,width:0,height:0}),2),w=g[0],E=g[1];return Object(r.useEffect)((function(){v.current&&(E(v.current.getBBox()),h(v.current.getBBox()))}),[c,l,i]),a.a.createElement("g",{transform:"translate(".concat(t," ").concat(n,")"),onClick:function(e){e.stopPropagation(),b(p)}},a.a.createElement("rect",{width:"".concat(m*f,"px"),height:"".concat(d*f,"px"),fill:s,stroke:y?"red":"transparent"}),a.a.createElement("g",{ref:v,fontSize:"".concat(l*f,"px"),fontFamily:u,transform:"translate(".concat((m*f-w.width)/2-w.x," ").concat((d*f-w.height)/2,")")},c.split(/[\n\r|\n|\r\n]/).map((function(e,t){return a.a.createElement("text",{dominantBaseline:"text-before-edge",textAnchor:i,fill:o,key:t,x:0,y:t*l*f},e)}))))};lt.propTypes={};var ut=lt;n(759);function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mt=[18,20,22,24,26,28,32,36,40,44,48,56,64,72,80,88,96],dt=function(e){var t=e.bannerProps,n=(e.isTextSelected,e.bannerPropsChange),o=e.unselectBanner,c=st(Object(r.useState)(!1),2),i=c[0],l=c[1],u=st(Object(r.useState)(null),2),s=u[0],f=u[1],m=st(Object(r.useState)(null),2),h=m[0],y=m[1],v=function(e,t){n(e,t)},g=function(e){return function(t){var n=t.rgb,r=n.r,a=n.g,o=n.b,c=n.a;v(e,"rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(c,")"))}};return Object(r.useEffect)((function(){}),[]),a.a.createElement("div",{className:"banner-editor",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"banner-editor__wrap"},a.a.createElement("div",{className:"banner-editor__row"},a.a.createElement(d.a,{onClick:function(e){return f(e.currentTarget)}},a.a.createElement(ze.a,{htmlColor:t.color})),a.a.createElement(k.a,{id:"font-color-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return f(null)}},a.a.createElement(Pe.CompactPicker,{color:t.color,onChangeComplete:g("color")})),a.a.createElement(d.a,{onClick:function(e){return y(e.currentTarget)}},a.a.createElement(He.a,{htmlColor:"transparent"!==t.background?t.background:"#000"})),a.a.createElement(k.a,{id:"stroke-color-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:function(){return y(null)}},a.a.createElement(Pe.CompactPicker,{color:"transparent"!==t.background?t.background:"#000",onChangeComplete:g("background"),banner:!0})),a.a.createElement("div",{className:"banner-editor__selector-btn"},"Size:",a.a.createElement(p.a,{labelId:"size-select",value:t.size,onChange:function(e){return v("size",e.target.value)},variant:"filled"},mt.map((function(e){return a.a.createElement(b.a,{key:e,value:e},e)})))),a.a.createElement(d.a,{onClick:function(){return l(!0)},variant:"outlined",className:"banner-editor__flex-btn"},a.a.createElement(H.a,null),"Edit Text"),a.a.createElement(S.a,{open:i,onClose:function(){return l(!1)}},a.a.createElement(et,{text:t.text,textUpdate:function(e){return v("text",e)},onClose:function(){return l(!1)}}))),a.a.createElement("div",{className:"banner-editor__row"},a.a.createElement(d.a,{variant:"start"===t.textAnchor?"contained":"text",onClick:function(){return v("textAnchor","start")}},a.a.createElement(Le.a,null)),a.a.createElement(d.a,{variant:"middle"===t.textAnchor?"contained":"text",onClick:function(){return v("textAnchor","middle")}},a.a.createElement(De.a,null)),a.a.createElement(d.a,{variant:"end"===t.textAnchor?"contained":"text",onClick:function(){return v("textAnchor","end")}},a.a.createElement($e.a,null)),a.a.createElement(d.a,{onClick:o,className:"banner-editor__flex-btn",variant:"contained"},a.a.createElement(ye.a,null),"完成"))))};dt.propTypes={};var pt=dt;function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ht(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var kt={x:480,y:259.5,color:"#000",background:"transparent",text:"",rotate:0,size:18,strokeWidth:0,stroke:"#fff",textAnchor:"start",bBox:{x:0,y:0,width:0,height:0}},jt={x:0,y:0,rx:0,ry:0,color:"#fff",background:"#000",size:40,textAnchor:"start",text:"",bBox:{x:0,y:0,width:0,height:0},imgWidth:960,bannerHeight:220.5},Ot=[{label:"版型-1",key:"mode-1",val:1,icon:"layout-1"},{label:"版型-2",key:"mode-2",val:2,icon:"layout-2"},{label:"版型-3",key:"mode-3",val:3,icon:"layout-3"},{label:"版型-4",key:"mode-4",val:4,icon:"layout-4"}],_t={viewHeight:519,imgTransY:0,topBannerShow:!1,bottomBannerShow:!1,bottomBannerTransY:0},Ct=[{value:'"Noto Sans", Roboto, Helvetica, Arial, sans-serif',file:null,label:"系統字體"},{value:"notoSansTC-medium",file:"notoSansTC-medium",label:"思源黑體"},{value:"notoSansTC-bold",file:"notoSansTC-bold",label:"思源黑體-粗"},{value:"notoSansTC-black",file:"notoSansTC-black",label:"思源黑體-黑"},{value:"font-jf-openhuninn",file:"font-jf-openhuninn",label:"粉圓體"},{value:"font-soukou-mincho",file:"font-soukou-mincho",label:"裝甲明朝"}],At=Object(h.a)({btn:{color:"white"},select:{color:"white"},menuItem:{color:"white"}}),Nt=function(e){var t=At(),n="object"===("undefined"==typeof window?"undefined":St(window)),o=Object(r.useRef)(null),c=Object(r.useRef)(null),i=Object(r.useRef)(1),l=wt(Object(r.useState)(""),2),u=l[0],s=l[1],f=wt(Object(r.useState)({x:0,y:0,dx:0,dy:0}),2),h=f[0],y=f[1],g=wt(Object(r.useState)(!1),2),E=g[0],k=g[1],j=wt(Object(r.useState)([]),2),O=j[0],_=j[1],A=wt(Object(r.useState)(-1),2),N=A[0],T=A[1],B=wt(Object(r.useState)(null),2),P=B[0],R=B[1],z=wt(Object(r.useState)(vt({},jt)),2),M=z[0],H=z[1],U=wt(Object(r.useState)(vt({},jt)),2),L=U[0],F=U[1],D=wt(Object(r.useState)(Ot[0]),2),W=D[0],$=D[1],Y=wt(Object(r.useState)(vt({},_t)),2),X=Y[0],q=Y[1],J=wt(Object(r.useState)(1),2),V=J[0],G=J[1],K=wt(Object(r.useState)(Ct[0]),2),Q=K[0],Z=K[1],ee=wt(Object(r.useState)(!1),2),te=ee[0],ne=ee[1],re=wt(Object(r.useState)(!0),2),ae=re[0],oe=re[1],ce=function(e,t){N>=0&&ye(gt({},e,t))},le=function(e,t){P&&("top"===P?H(vt(vt({},M),{},gt({},e,t))):F(vt(vt({},L),{},gt({},e,t))))},ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=c.current.getBoundingClientRect(),a=r.top,o=r.left,i=r.bottom,l=r.right,u=r.x,s=r.y,f=e>=o&&e<=l&&t>=a&&t<=i;if(f){var m={x:e-u,y:t-s,dx:n?0:e-u-h.x,dy:n?0:t-s-h.y};y(m)}},se=function(e){var t=e.clientX?e:e.touches[0],n=t.clientX,r=t.clientY;E&&ue(n,r)},fe=function(e,t){k(!0),ue(e,t,!0)},me=function(){k(!1)},de=function(e){T(e),he()},pe=function(e){R(e),be()},be=function(){T(-1)},he=function(){R(null)},ye=function(e){var t=ht(O);t[N]=vt(vt({},t[N]),e),_(t)},ve=function(){var e=(n?window.innerWidth:void 0)/960;G(e<=1?e:1)};return Object(r.useEffect)((function(){var e=ht(O);e.forEach((function(e){var t=e.x/(960*i.current),n=e.y/(519*i.current);e.x=960*t*V,e.y=519*n*V})),_(e),i.current=V}),[V]),Object(r.useEffect)((function(){N>=0&&ye({x:O[N].x+h.dx,y:O[N].y+h.dy})}),[h]),Object(r.useEffect)((function(){return!!n&&(ve(),window.addEventListener("resize",ve),function(){return window.removeEventListener("resize",ve)})}),[]),a.a.createElement("div",{className:"editor",onTouchMove:se,onMouseMove:se,onClick:function(){be(),he()}},a.a.createElement("div",gt({className:"editor__wrap"},"className",m()("editor__wrap",{"editor__wrap--text-edit-mode":N>-1,"editor__wrap--banner-edit-mode":P})),a.a.createElement("div",{className:"editor__svg-wrap"},a.a.createElement("svg",{viewBox:"0 0 ".concat(960*V," ").concat(X.viewHeight*V),width:"".concat(960*V,"px"),height:"".concat(X.viewHeight*V,"px"),ref:o,xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("defs",{id:"svg-def"}),X.topBannerShow&&a.a.createElement(ut,bt({},M,{pos:"top",scale:V,selectHandler:pe,isSelected:"top"===P,fontFamily:Q.value,handleBBoxChange:function(e){return le("bBox",e)}})),a.a.createElement("g",{onTouchStart:function(e){return fe(e.touches[0].clientX,e.touches[0].clientY)},onTouchEnd:me,onMouseDown:function(e){return fe(e.clientX,e.clientY)},onMouseUp:me,transform:"translate(0 ".concat(X.imgTransY*V,")"),ref:c},a.a.createElement("g",{transform:"scale(".concat(V," ").concat(V,")")},u&&a.a.createElement("image",{id:"svg-img",href:"".concat("http://www.ghibli.jp/gallery/").concat(u),width:960,height:519})),O.map((function(e,t){return a.a.createElement(Be,bt({},e,{key:t,index:t,isSelected:t===N,selectHandler:de,handleBBoxChange:function(e){return ce("bBox",e)},scale:V,fontFamily:Q.value}))}))),X.bottomBannerShow&&a.a.createElement(ut,bt({},L,{pos:"bottom",y:X.bottomBannerTransY*V,scale:V,selectHandler:pe,isSelected:"bottom"===P,fontFamily:Q.value,handleBBoxChange:function(e){return le("bBox",e)}})))),N>-1&&a.a.createElement(ot,{textProps:O[N],textPropsChange:ce,deleteText:function(){if(N>=0){var e=ht(O);e.splice(N,1),_(e),T(-1)}},unselectText:be}),P&&a.a.createElement(pt,{bannerProps:"top"===P?M:L,bannerPropsChange:le,unselectBanner:he}),a.a.createElement("div",{className:"editor__actions",onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"editor__row"},a.a.createElement(d.a,{onClick:function(){return oe(!0)},classes:{root:t.btn}},a.a.createElement(x.a,null)),a.a.createElement(C,{className:"painter__mirror-selector",options:Ot,onChange:function(e){var t=vt({},_t);switch(e.val){case 2:t.viewHeight=739.5,t.imgTransY=220.5,t.topBannerShow=!0;break;case 3:t.viewHeight=739.5,t.bottomBannerShow=!0,t.bottomBannerTransY=519;break;case 4:t.viewHeight=960,t.imgTransY=220.5,t.topBannerShow=!0,t.bottomBannerShow=!0,t.bottomBannerTransY=739.5}$(e),q(t)},selectedLabel:a.a.createElement(I,{icon:W.icon}),itemRender:function(e){return a.a.createElement(I,{icon:e.icon,label:e.label})},classes:{btn:t.btn}}),a.a.createElement(d.a,{onClick:function(){var e=ht(O);e.push(vt(vt({},kt),{},{text:"",x:960*V/2,y:519*V/2})),_(e),T(e.length-1)},classes:{root:t.btn}},a.a.createElement(v.a,null)),"字型:",a.a.createElement(p.a,{labelId:"family-select",value:Q,onChange:function(e){return Z(e.target.value)},classes:{root:t.select}},Ct.map((function(e){return a.a.createElement(b.a,{key:e.label,value:e},a.a.createElement("span",{style:{fontFamily:e.value}},e.label))}))),a.a.createElement(d.a,{onClick:function(){return ne(!0)},classes:{root:t.btn}},a.a.createElement(w.a,null)),a.a.createElement(S.a,{open:te,onClose:function(){return ne(!1)}},a.a.createElement(ie,{svgNode:o.current,imgUrl:u,fontFamily:Q,svgProps:X,onClose:function(){return ne(!1)},imgWidth:960,imgHeight:519,bannerHeight:220.5,scale:V}))))),a.a.createElement(S.a,{open:ae,onClose:function(){return oe(!1)}},a.a.createElement(Ce,{selectImage:function(e){s("".concat(e,".jpg")),oe(!1)}})))};Nt.propTypes={};var Tt=Nt,Bt=n(340);function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zt=It(It({},Object(Bt.a)({palette:{text:{primary:"#665042"}},typography:{useNextVariants:!0,fontFamily:'"Noto Sans", Roboto, Helvetica, Arial, sans-serif',button:{textTransform:"none"},h1:{fontSize:40,fontWeight:"bold"},h2:{fontSize:32,fontWeight:"bold"},h3:{fontSize:24,fontWeight:"bold"},h4:{fontSize:16,fontWeight:"bold"},overline:{textTransform:"none"}}})),{},{overrides:{MuiButton:{root:{lineHeight:1,minWidth:24,borderRadius:0,padding:"6px 8px"},contained:{boxShadow:"none",backgroundColor:"#fdc0c7"}},MuiIconButton:{root:{padding:6},colorPrimary:{color:"#f2f0d9",backgroundColor:"#12c3b9","&:hover":{backgroundColor:"#12c3b9","@media (hover: none)":{backgroundColor:"#12c3b9"}}}},MuiList:{padding:{paddingTop:0,paddingBottom:0}},MuiFilledInput:{input:{padding:"6px 10px"}},MuiOutlinedInput:{input:{padding:"6px 10px"}}}});Object(s.a)(window);l.a({dsn:"https://d45502e3d91647baaf14421f64fc61f1@o437865.ingest.sentry.io/5400910",integrations:[new u.a.Tracing],tracesSampleRate:1});var Mt=function(){return a.a.createElement(i.a,{theme:zt},a.a.createElement(Tt,null))};c.a.render(a.a.createElement(Mt,null),document.getElementById("root"))}});